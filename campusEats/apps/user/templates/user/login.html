{% extends 'base.html' %}

{% block title %}Login - My Website{% endblock %}

{% block content %}
    <h2>Login</h2>
    <div class="register-form">
        <form method="post">
            {% csrf_token %}
            {{error_message}}
            <div class="form-group">
                <label for="id">Email/Username:</label>
                <input type="text" name="id" id="id" required>
            </div>
            <div class="form-group">
                <label for="id_password">Password:</label>
                <input type="password" name="password" id="id_password" required>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Login</button>
            </div>
        </form>
    </div>
    
    <!-- Error message popup div -->
    <div id="error-popup" class="error-popup"></div>

    <!-- Add your JavaScript to show/hide the error message -->
    <script>
        // Function to display the error message popup
        function showErrorPopup(message) {
            const errorPopup = document.getElementById("error-popup");
            errorPopup.textContent = message;
            errorPopup.style.display = "block";
            setTimeout(() => {
                errorPopup.style.display = "none";
            }, 3000); // Hide the popup after 3 seconds (adjust as needed)
        }
        console.log("Error message:", errorMessage);
        // Call the showErrorPopup function with the error message from the template context
        const errorMessage = "{{ error_message }}"; // Escape the message for JavaScript
        if (errorMessage) {
            showErrorPopup(errorMessage);
        }
    </script>
{% endblock %}
